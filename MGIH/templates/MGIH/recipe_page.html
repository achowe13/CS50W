{% extends "MGIH/layout.html" %}

{% block body %}
    <div class="recipe-page-div">
        <div>
            <div class="recipe-title">
                <h1><strong>{{ recipe.name }}</strong></h1>
                <form action="{% url 'save_recipe' %}" method="post" class="bookmark-form">
                    {% csrf_token %}
                    <input type="hidden" value="{{ recipe.id }}" name="id">
                    <button class="bookmark" type="submit">
                        {% if saved == True %}
                            <img class="bookmark-img" src="/images/bookmark.png" alt="bookmarked">
                        {% else %}
                            <img class="bookmark-img" src="/images/bookmark2.png" alt="bookmark">
                        {% endif %}
                    </button> 
                </form>
            </div>
        </div>
        <div>
            <img src="/{{ recipe.image }}" alt="{{ recipe.name }}" class="recipePage-image">
        </div>
        <div class="rating">
            <div class="stars">
                {% for number in count %}
                    {% if number == rating %}
                        <input class="stars-inputs" type="radio" data-page_id="{{ recipe.id }}" id="star{{number}}" name="rating" value="{{number}}" checked/>
                        <label for="star{{number}}">&#9733;</label>
                    {% else %}
                        <input class="stars-inputs" type="radio" data-page_id="{{ recipe.id }}" id="star{{number}}" name="rating" value="{{number}}" />
                        <label for="star{{number}}">&#9733;</label>
                    {% endif %}
                {% endfor %}    
            </div>
            <p>Adv. Rating: {{adv_rating}} ({{number_of_ratings}})</p>
        </div>
        <div class="recipe-ingredients-div">
            <h3><strong>Ingredients:</strong></h3>
            {% for measurement, ingredient in m_and_i %}
                <p>{{ measurement }} {{ ingredient }}</p>
            {% endfor %}
        </div>
        <div class="recipe-directions-div">
            <h3><strong>Directions:</strong></h3>
            <p class="recipe-description"> {{ recipe.description }} </p>
        </div>
        <div class="comments">
            <h3>Comments:</h3>
            <button type="button" id="new-comment-btn" class="submit-btn">New Comment</button>
            <div id="new-comment-div" style="display: none">
                <form action="{% url 'comment' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="page_id" value="{{ recipe.id }}">
                    <div style="width: 100%;">
                        <textarea name="new_comment" id="new_comment" cols="50" rows="10"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Submit</button>
                </form>
            </div>
            {% for comment in comments %}
                <div class="comment-box">
                    <h5>{{ comment.user }}:</h5>
                    <p>{{ comment.comment }}</p>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}