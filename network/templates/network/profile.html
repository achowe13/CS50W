{% extends "network/layout.html" %}

{% block body %}
    <h1 style="text-align: center;">Profile</h1>
    <div class="divs">
        <h2>{{ page_user }}</h2>
        {% if your_page == False %}
            <form method="post" action="{% url 'follow'%}">
                {% csrf_token %}
                <input type="hidden" name="id" value="{{ page_user.id }}">
                {% if following == True %}
                    <button class="btn btn-outline-danger" type="submit">Unfollow</button>
                {% else %}
                    <button class="btn btn-outline-primary" type="submit">Follow</button>
                {% endif %}
            </form>
        {% endif %}
    </div>
    <div class="divs" style="border:none">    
        <div id="follower"><h5>Followers: {{ follower_count }}</h5></div>
        <div id="following"><h5>Following: {{ following_count }}</h5></div>
    </div>
    <div class="divs" >
        <h4>Posts:</h4>
    
        {% for each_post in page %}
            <div class="divs" style="margin-left: 0%; margin-right: 0%;">
                <div class="user"> 
                    <h5>{{each_post.user}}</h5>
                </div>
                <div>
                    <span id="post-content-{{each_post.id}}" class="post-content">{{each_post.content}}</span>
                    <form id="edit-form-{{each_post.id}}" class="edit-form" style="display:none">
                        {% csrf_token %}
                        <textarea id="edit-content-{{each_post.id}}" class="edited-content">{{each_post.content}}</textarea>
                        <button type="submit" data-id="{{each_post.id}}" class="btn btn-primary save-btn">Save</button>
                    </form>            
                </div>
                <div class="timestamp">
                    {{each_post.timestamp}}
                </div>
                <div>
                    <button class="like-btn" data-id="{{each_post.id}}"><img class="like-btn-img" src="/static/network/likeButton.png" alt="Like"><span id="like-count-{{each_post.id}}" style="font-weight: bold;">{{ each_post.likes_count }}</span></button>                    
                    {% if user == each_post.user %}
                        <button class="btn btn-sm btn-outline-secondary edit-btn" data-id="{{each_post.id}}" data-content="{{each_post.content}}">Edit</button>            
                    {% endif %}
                </div>                
            </div>
        {% endfor %}
    </div>
    <nav aria-label="page navigation" class="nav">
        <div class="page-nav">
            <ul>    
                {% if page.has_previous %}
                    <li><a class="page-link" href="?page=1">&laquo; first</a></li>
                    <li>...</li>
                    <li><a class="page-link" href="?page={{ page.previous_page_number}}">Previous</a></li>
                {% endif %}
                <span>
                    <li id="current-page">{{ page.number }}</li>
                </span>
                {% if page.has_next %}
                    <li><a class="page-link" href="?page={{ page.next_page_number }}">Next</a></li>
                    <li>...</li>
                    <li><a class="page-link" href="?page={{ page.paginator.num_pages }}">Last &raquo;</a></li>
                {% endif %}
            </ul>
        </div>
    </nav> 
{% endblock %}